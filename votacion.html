<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Votaci√≥n Proyectos Sostenibles</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f4f6f9;
      color: #333;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      margin-top: 0;
    }
    p.instructions {
      background: #e2f0ff;
      padding: 15px;
      border-left: 5px solid #3498db;
      margin-bottom: 20px;
      font-size: 1em;
      line-height: 1.5;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input[type="number"] {
      width: 60px;
      margin-left: 10px;
      padding: 5px;
      font-size: 1em;
    }
    textarea {
      width: 100%;
      height: 60px;
      margin-top: 5px;
      resize: vertical;
      padding: 10px;
      font-size: 1em;
    }
    select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      font-size: 1em;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background: #27ae60;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
    }
    button:hover {
      background: #219150;
    }
    .result {
      margin-top: 30px;
      background: #e9ffe8;
      padding: 15px;
      border: 1px solid #b2ffb1;
      border-radius: 10px;
    }
    .footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9em;
      color: #aaa;
    }
  </style>
</head>
<body>

<header>
  <h1>üó≥Ô∏è Votaci√≥n de Proyectos Sostenibles</h1>
</header>

<div class="container">
  <h2>Instrucciones de Votaci√≥n</h2>
  <p class="instructions">
    Cada miembro del equipo debe seleccionar su nombre y evaluar todos los proyectos (incluyendo el propio) seg√∫n los siguientes criterios:
    <ul>
      <li><strong>Innovaci√≥n:</strong> ¬øQu√© tan original es el proyecto?</li>
      <li><strong>Viabilidad Econ√≥mica:</strong> ¬øEs sostenible desde el punto de vista financiero?</li>
      <li><strong>Impacto Ambiental:</strong> ¬øCu√°l es su beneficio para el medio ambiente?</li>
      <li><strong>Escalabilidad / Alcance:</strong> ¬øHasta qu√© punto puede extenderse o replicarse?</li>
      <li><strong>Comentario Final:</strong> Observaciones generales sobre el proyecto.</li>
    </ul>
    Usa una escala del <strong>1 al 10</strong>, donde <strong>1 = Muy bajo cumplimiento</strong> y <strong>10 = Alto cumplimiento</strong>.
  </p>

  <form id="voteForm">
    <label>
      Tu nombre:
      <select id="voter" required>
        <option value="">-- Selecciona tu nombre --</option>
        <option value="Daniel Jaramillo L√≥pez">Daniel Jaramillo L√≥pez</option>
        <option value="Diana Cecilia Benavides Surata">Diana Cecilia Benavides Surata</option>
        <option value="Luis Eduardo Mart√≠nez Garc√≠a">Luis Eduardo Mart√≠nez Garc√≠a</option>
        <option value="Maicol Duban Ni√±o Plazas">Maicol Duban Ni√±o Plazas</option>
      </select>
    </label>

    <!-- Daniel -->
    <h3>Proyecto: Reciclando y estudiando ANDO</h3>
    <label>Innovaci√≥n <input type="number" min="1" max="10" name="Daniel_I"></label>
    <label>Viabilidad Econ√≥mica <input type="number" min="1" max="10" name="Daniel_VE"></label>
    <label>Impacto Ambiental <input type="number" min="1" max="10" name="Daniel_IA"></label>
    <label>Escalabilidad / Alcance <input type="number" min="1" max="10" name="Daniel_EA"></label>
    <label>Comentario Final<textarea name="Daniel_C"></textarea></label>

    <!-- Diana -->
    <h3>Proyecto: R¬≥ Oficina (Reduce, Reutiliza, Recicla)</h3>
    <label>Innovaci√≥n <input type="number" min="1" max="10" name="Diana_I"></label>
    <label>Viabilidad Econ√≥mica <input type="number" min="1" max="10" name="Diana_VE"></label>
    <label>Impacto Ambiental <input type="number" min="1" max="10" name="Diana_IA"></label>
    <label>Escalabilidad / Alcance <input type="number" min="1" max="10" name="Diana_EA"></label>
    <label>Comentario Final<textarea name="Diana_C"></textarea></label>

    <!-- Luis -->
    <h3>Proyecto: M√≥dulos De Bienestar Costero "Caribe Limpio" - Piloto Playa Blanca</h3>
    <label>Innovaci√≥n <input type="number" min="1" max="10" name="Luis_I"></label>
    <label>Viabilidad Econ√≥mica <input type="number" min="1" max="10" name="Luis_VE"></label>
    <label>Impacto Ambiental <input type="number" min="1" max="10" name="Luis_IA"></label>
    <label>Escalabilidad / Alcance <input type="number" min="1" max="10" name="Luis_EA"></label>
    <label>Comentario Final<textarea name="Luis_C"></textarea></label>

    <!-- Maicol -->
    <h3>Proyecto: Reprogras aceites</h3>
    <label>Innovaci√≥n <input type="number" min="1" max="10" name="Maicol_I"></label>
    <label>Viabilidad Econ√≥mica <input type="number" min="1" max="10" name="Maicol_VE"></label>
    <label>Impacto Ambiental <input type="number" min="1" max="10" name="Maicol_IA"></label>
    <label>Escalabilidad / Alcance <input type="number" min="1" max="10" name="Maicol_EA"></label>
    <label>Comentario Final<textarea name="Maicol_C"></textarea></label>

    <button type="submit">Enviar Voto</button>
  </form>

  <div id="results" class="result" style="display:none;"></div>
</div>

<div class="footer">
  &copy; 2025 | Sistema de Evaluaci√≥n de Proyectos Sostenibles
</div>

<script>
  const form = document.getElementById("voteForm");
  const resultsDiv = document.getElementById("results");

  // Inicializar localStorage si no existe
  if (!localStorage.votes) {
    localStorage.votes = JSON.stringify({});
  }

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    const voter = document.getElementById("voter").value;
    if (!voter) return alert("Por favor, selecciona tu nombre.");

    const formData = new FormData(form);
    const votes = {};
    for (let [key, value] of formData.entries()) {
      if (key.includes("_")) {
        votes[key] = value;
      }
    }

    let allVotes = JSON.parse(localStorage.votes);
    allVotes[voter] = votes;
    localStorage.votes = JSON.stringify(allVotes);

    alert(`‚úÖ Voto de ${voter} guardado correctamente.`);

    checkAllVoted();
  });

  function checkAllVoted() {
    const names = [
      "Daniel Jaramillo L√≥pez",
      "Diana Cecilia Benavides Surata",
      "Luis Eduardo Mart√≠nez Garc√≠a",
      "Maicol Duban Ni√±o Plazas"
    ];
    const allVotes = JSON.parse(localStorage.votes);
    const voted = Object.keys(allVotes).length === names.length;

    if (voted) {
      calculateWinner();
    }
  }

  function calculateWinner() {
    const projects = {
      Daniel: { total: 0 },
      Diana: { total: 0 },
      Luis: { total: 0 },
      Maicol: { total: 0 }
    };

    const allVotes = JSON.parse(localStorage.votes);

    for (const voter in allVotes) {
      const vote = allVotes[voter];

      projects.Daniel.total += parseInt(vote["Daniel_I"] || 0) +
                               parseInt(vote["Daniel_VE"] || 0) +
                               parseInt(vote["Daniel_IA"] || 0) +
                               parseInt(vote["Daniel_EA"] || 0);

      projects.Diana.total += parseInt(vote["Diana_I"] || 0) +
                              parseInt(vote["Diana_VE"] || 0) +
                              parseInt(vote["Diana_IA"] || 0) +
                              parseInt(vote["Diana_EA"] || 0);

      projects.Luis.total += parseInt(vote["Luis_I"] || 0) +
                             parseInt(vote["Luis_VE"] || 0) +
                             parseInt(vote["Luis_IA"] || 0) +
                             parseInt(vote["Luis_EA"] || 0);

      projects.Maicol.total += parseInt(vote["Maicol_I"] || 0) +
                               parseInt(vote["Maicol_VE"] || 0) +
                               parseInt(vote["Maicol_IA"] || 0) +
                               parseInt(vote["Maicol_EA"] || 0);
    }

    const sorted = Object.entries(projects).sort((a, b) => b[1].total - a[1].total);

    let resultHtml = "<h2>üèÜ Resultados Finales:</h2>";
    sorted.forEach(([name, data]) => {
      resultHtml += `<p><strong>${name}</strong>: ${data.total} puntos</p>`;
    });

    resultHtml += `<h3 style="color:green;">‚úÖ Ganador: ${sorted[0][0]} con ${sorted[0][1].total} puntos.</h3>`;

    resultsDiv.innerHTML = resultHtml;
    resultsDiv.style.display = "block";
  }
</script>

</body>
</html>
